<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/admin :: layout(~{::content})}">
<body>
<div th:fragment="content">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>‚úèÔ∏è Ch·ªânh s·ª≠a th√¥ng tin kh√°ch h√†ng</h2>
        <a th:href="@{'/admin/customers/' + ${customer.id}}" class="btn btn-secondary">‚¨ÖÔ∏è Quay l·∫°i</a>
    </div>

    <!-- Th√¥ng b√°o -->
    <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
    <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

    <div class="card">
        <div class="card-body">
            <form th:action="@{'/admin/customers/' + ${customer.id} + '/edit'}" th:object="${customer}" method="post">
                <div class="row">
                    <!-- Th√¥ng tin c∆° b·∫£n -->
                    <div class="col-md-6">
                        <h5 class="mb-3">üìã Th√¥ng tin c∆° b·∫£n</h5>
                        
                        <div class="mb-3">
                            <label for="firstName" class="form-label">H·ªç <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="firstName" th:field="*{firstName}" required>
                        </div>

                        <div class="mb-3">
                            <label for="lastName" class="form-label">T√™n <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="lastName" th:field="*{lastName}" required>
                        </div>

                        <div class="mb-3">
                            <label for="phoneNumber" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="tel" class="form-control" id="phoneNumber" th:field="*{phoneNumber}" 
                                   placeholder="VD: 0901234567">
                        </div>

                        <div class="mb-3">
                            <label for="dateOfBirth" class="form-label">Ng√†y sinh</label>
                            <input type="date" class="form-control" id="dateOfBirth" th:field="*{dateOfBirth}">
                        </div>

                        <div class="mb-3">
                            <label for="gender" class="form-label">Gi·ªõi t√≠nh</label>
                            <select class="form-select" id="gender" th:field="*{gender}">
                                <option value="">-- Ch·ªçn gi·ªõi t√≠nh --</option>
                                <option th:each="genderOption : ${genders}"
                                        th:value="${genderOption}"
                                        th:text="${genderOption == T(utescore.entity.Customer.Gender).MALE ? 'Nam' : 
                                                 genderOption == T(utescore.entity.Customer.Gender).FEMALE ? 'N·ªØ' : 'Kh√°c'}">
                                </option>
                            </select>
                        </div>
                    </div>

                    <!-- Th√¥ng tin li√™n h·ªá -->
                    <div class="col-md-6">
                        <h5 class="mb-3">üìç Th√¥ng tin li√™n h·ªá</h5>
                        
                        <div class="mb-3">
                            <label for="address" class="form-label">ƒê·ªãa ch·ªâ</label>
                            <textarea class="form-control" id="address" th:field="*{address}" rows="3" 
                                      placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ ƒë·∫ßy ƒë·ªß..."></textarea>
                        </div>

                        <h5 class="mb-3 mt-4">üö® Li√™n h·ªá kh·∫©n c·∫•p</h5>
                        
                        <div class="mb-3">
                            <label for="emergencyContact" class="form-label">Ng∆∞·ªùi li√™n h·ªá kh·∫©n c·∫•p</label>
                            <input type="text" class="form-control" id="emergencyContact" th:field="*{emergencyContact}" 
                                   placeholder="T√™n ng∆∞·ªùi li√™n h·ªá">
                        </div>

                        <div class="mb-3">
                            <label for="emergencyPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i kh·∫©n c·∫•p</label>
                            <input type="tel" class="form-control" id="emergencyPhone" th:field="*{emergencyPhone}" 
                                   placeholder="VD: 0901234567">
                        </div>
                    </div>
                </div>

                <!-- Th√¥ng tin h·ªá th·ªëng (ch·ªâ ƒë·ªçc) -->
                <div class="row mt-4">
                    <div class="col-12">
                        <h5 class="mb-3">‚öôÔ∏è Th√¥ng tin h·ªá th·ªëng</h5>
                        <div class="row">
                            <div class="col-md-3">
                                <label class="form-label">ID kh√°ch h√†ng:</label>
                                <input type="text" class="form-control" th:value="${customer.id}" readonly>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Ng√†y t·∫°o:</label>
                                <input type="text" class="form-control" 
                                       th:value="${#temporals.format(customer.createdAt, 'dd/MM/yyyy HH:mm')}" readonly>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:</label>
                                <input type="text" class="form-control" 
                                       th:value="${#temporals.format(customer.updatedAt, 'dd/MM/yyyy HH:mm')}" readonly>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">S·ªë l∆∞·ª£t ƒë·∫∑t s√¢n:</label>
                                <input type="text" class="form-control" th:value="${customer.bookings.size()}" readonly>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- N√∫t h√†nh ƒë·ªông -->
                <div class="mt-4 text-center">
                    <button type="submit" class="btn btn-primary me-2">üíæ L∆∞u thay ƒë·ªïi</button>
                    <a th:href="@{'/admin/customers/' + ${customer.id}}" class="btn btn-secondary">‚ùå H·ªßy</a>
                </div>
            </form>
        </div>
    </div>

    <!-- C·∫£nh b√°o -->
    <div class="alert alert-info mt-3">
        <strong>üìù L∆∞u √Ω:</strong>
        <ul class="mb-0">
            <li>C√°c tr∆∞·ªùng c√≥ d·∫•u <span class="text-danger">*</span> l√† b·∫Øt bu·ªôc</li>
            <li>S·ªë ƒëi·ªán tho·∫°i ph·∫£i l√† duy nh·∫•t trong h·ªá th·ªëng</li>
            <li>Th√¥ng tin h·ªá th·ªëng kh√¥ng th·ªÉ ch·ªânh s·ª≠a</li>
        </ul>
    </div>
</div>
</body>
</html>