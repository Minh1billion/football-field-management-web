<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{layout/admin :: layout(~{::content})}">
<body>
	<div th:fragment="content">
		<h2 class="mb-3">‚ûï Th√™m d·ªãch v·ª• m·ªõi</h2>

		<div class="row justify-content-center">
			<div class="col-md-8">
				<div class="card">
					<div class="card-header">
						<h5 class="mb-0">Th√¥ng tin d·ªãch v·ª•</h5>
					</div>
					<div class="card-body">
						<!-- Th√¥ng b√°o l·ªói -->
						<div th:if="${errorMessage}"
							class="alert alert-danger alert-dismissible fade show"
							role="alert">
							<span th:text="${errorMessage}"></span>
							<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
						</div>

						<form th:action="@{/admin/services/create}" th:object="${service}"
							method="post" enctype="multipart/form-data">
							<div class="row">
								<div class="col-md-6 mb-3">
									<label for="name" class="form-label">T√™n d·ªãch v·ª• <span
										class="text-danger">*</span></label> <input type="text"
										class="form-control" id="name" th:field="*{name}">
									<div class="text-danger mt-1"
										th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
								</div>

								<div class="col-md-6 mb-3">
									<label for="serviceType" class="form-label">Lo·∫°i d·ªãch
										v·ª• <span class="text-danger">*</span>
									</label> <select class="form-select" id="serviceType"
										th:field="*{serviceType}">
										<option value="">-- Ch·ªçn lo·∫°i d·ªãch v·ª• --</option>
										<option th:each="type : ${serviceTypes}" th:value="${type}"
											th:text="${type}"></option>
									</select>
									<div class="text-danger mt-1"
										th:if="${#fields.hasErrors('serviceType')}"
										th:errors="*{serviceType}"></div>
								</div>
							</div>

							<div class="row">
								<div class="col-md-6 mb-3">
									<label for="price" class="form-label">Gi√° (VNƒê) <span
										class="text-danger">*</span></label> <input type="number"
										class="form-control" id="price" th:field="*{price}"
										step="0.01" min="0">
									<div class="text-danger mt-1"
										th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></div>
								</div>

								<div class="col-md-6 mb-3">
									<label for="stockQuantity" class="form-label">S·ªë l∆∞·ª£ng
										t·ªìn kho</label> <input type="number" class="form-control"
										id="stockQuantity" th:field="*{stockQuantity}" min="0"
										value="0">
								</div>
							</div>

							<div class="mb-3">
								<label for="description" class="form-label">M√¥ t·∫£</label>
								<textarea class="form-control" id="description"
									th:field="*{description}" rows="4"></textarea>
								<div class="text-danger mt-1"
									th:if="${#fields.hasErrors('description')}"
									th:errors="*{description}"></div>
							</div>

							<!-- ‚úÖ Upload ·∫£nh c√≥ preview -->
							<div class="mb-3">
								<label for="imageFile" class="form-label">H√¨nh ·∫£nh d·ªãch
									v·ª•</label> <input type="file" class="form-control" id="imageFile"
									name="imageFile" accept="image/*" onchange="previewImage(this)">
								<div class="form-text">Ch·ªçn file ·∫£nh ƒë·ªÉ upload l√™n cloud
									(JPG, PNG, GIF)</div>

								<div id="imagePreview" class="mt-2" style="display: none;">
									<img id="preview" src="" alt="Preview"
										style="max-width: 200px; max-height: 200px; object-fit: cover; border-radius: 5px;">
								</div>
							</div>

							<div class="mb-3">
								<div class="form-check">
									<input class="form-check-input" type="checkbox"
										id="isAvailable" th:field="*{isAvailable}" checked> <label
										class="form-check-label" for="isAvailable">D·ªãch v·ª• c√≥
										s·∫µn</label>
								</div>
							</div>

							<div class="d-flex justify-content-between">
								<a th:href="@{/admin/services}" class="btn btn-secondary">üîô
									Quay l·∫°i</a>
								<button type="submit" class="btn btn-primary">üíæ L∆∞u
									d·ªãch v·ª•</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<script>
			function previewImage(input) {
				const preview = document.getElementById('preview');
				const previewDiv = document.getElementById('imagePreview');

				if (input.files && input.files[0]) {
					const reader = new FileReader();

					reader.onload = function(e) {
						preview.src = e.target.result;
						previewDiv.style.display = 'block';
					}

					reader.readAsDataURL(input.files[0]);
				} else {
					previewDiv.style.display = 'none';
				}
			}
		</script>
	</div>
</body>
</html>