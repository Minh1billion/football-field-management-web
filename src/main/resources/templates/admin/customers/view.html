<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/admin :: layout(~{::content})}">
<body>
<div th:fragment="content">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>üë§ Chi ti·∫øt kh√°ch h√†ng</h2>
        <div>
            <a th:href="@{'/admin/customers/' + ${customer.id} + '/edit'}" class="btn btn-warning">‚úèÔ∏è Ch·ªânh s·ª≠a</a>
            <a th:href="@{/admin/customers}" class="btn btn-secondary">‚¨ÖÔ∏è Quay l·∫°i</a>
        </div>
    </div>

    <!-- Th√¥ng b√°o -->
    <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
    <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

    <div class="row">
        <!-- Th√¥ng tin c∆° b·∫£n -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">üìã Th√¥ng tin c∆° b·∫£n</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <td><strong>ID:</strong></td>
                            <td th:text="${customer.id}"></td>
                        </tr>
                        <tr>
                            <td><strong>H·ªç:</strong></td>
                            <td th:text="${customer.firstName}"></td>
                        </tr>
                        <tr>
                            <td><strong>T√™n:</strong></td>
                            <td th:text="${customer.lastName}"></td>
                        </tr>
                        <tr>
                            <td><strong>H·ªç v√† t√™n:</strong></td>
                            <td><strong th:text="${customer.fullName}"></strong></td>
                        </tr>
                        <tr>
                            <td><strong>S·ªë ƒëi·ªán tho·∫°i:</strong></td>
                            <td th:text="${customer.phoneNumber ?: 'Ch∆∞a c√≥'}"></td>
                        </tr>
                        <tr>
                            <td><strong>Ng√†y sinh:</strong></td>
                            <td th:text="${customer.dateOfBirth != null ? #temporals.format(customer.dateOfBirth, 'dd/MM/yyyy') : 'Ch∆∞a c√≥'}"></td>
                        </tr>
                        <tr>
                            <td><strong>Gi·ªõi t√≠nh:</strong></td>
                            <td>
                                <span th:if="${customer.gender == T(utescore.entity.Customer.Gender).MALE}" class="badge bg-primary">Nam</span>
                                <span th:if="${customer.gender == T(utescore.entity.Customer.Gender).FEMALE}" class="badge bg-info">N·ªØ</span>
                                <span th:if="${customer.gender == T(utescore.entity.Customer.Gender).OTHER}" class="badge bg-secondary">Kh√°c</span>
                                <span th:if="${customer.gender == null}" class="text-muted">Ch∆∞a c√≥</span>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ƒê·ªãa ch·ªâ:</strong></td>
                            <td th:text="${customer.address ?: 'Ch∆∞a c√≥'}"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- Th√¥ng tin li√™n h·ªá kh·∫©n c·∫•p -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">üö® Li√™n h·ªá kh·∫©n c·∫•p</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <td><strong>Ng∆∞·ªùi li√™n h·ªá:</strong></td>
                            <td th:text="${customer.emergencyContact ?: 'Ch∆∞a c√≥'}"></td>
                        </tr>
                        <tr>
                            <td><strong>S·ªë ƒëi·ªán tho·∫°i:</strong></td>
                            <td th:text="${customer.emergencyPhone ?: 'Ch∆∞a c√≥'}"></td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- Th√¥ng tin h·ªá th·ªëng -->
            <div class="card mt-3">
                <div class="card-header">
                    <h5 class="card-title mb-0">‚öôÔ∏è Th√¥ng tin h·ªá th·ªëng</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <td><strong>Ng√†y t·∫°o:</strong></td>
                            <td th:text="${#temporals.format(customer.createdAt, 'dd/MM/yyyy HH:mm:ss')}"></td>
                        </tr>
                        <tr>
                            <td><strong>C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:</strong></td>
                            <td th:text="${#temporals.format(customer.updatedAt, 'dd/MM/yyyy HH:mm:ss')}"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Th·ªëng k√™ ho·∫°t ƒë·ªông -->
    <div class="row mt-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">üìä Th·ªëng k√™ ho·∫°t ƒë·ªông</h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-3">
                            <div class="border rounded p-3">
                                <h4 class="text-primary" th:text="${customer.bookings.size()}">0</h4>
                                <p class="mb-0">S·ªë l∆∞·ª£t ƒë·∫∑t s√¢n</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="border rounded p-3">
                                <h4 class="text-success" th:text="${customer.orders.size()}">0</h4>
                                <p class="mb-0">S·ªë ƒë∆°n h√†ng</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="border rounded p-3">
                                <h4 class="text-warning" th:text="${customer.reviews.size()}">0</h4>
                                <p class="mb-0">S·ªë ƒë√°nh gi√°</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="border rounded p-3">
                                <h4 class="text-info" th:text="${customer.loyalty != null ? 'C√≥' : 'Ch∆∞a c√≥'}">Ch∆∞a c√≥</h4>
                                <p class="mb-0">Ch∆∞∆°ng tr√¨nh th√†nh vi√™n</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- N√∫t h√†nh ƒë·ªông -->
    <div class="mt-4 text-center">
        <a th:href="@{'/admin/customers/' + ${customer.id} + '/edit'}" class="btn btn-warning me-2">‚úèÔ∏è Ch·ªânh s·ª≠a th√¥ng tin</a>
        <form th:action="@{'/admin/customers/' + ${customer.id} + '/delete'}" method="post" class="d-inline">
            <button type="submit" class="btn btn-danger"
                    onclick="return confirm('X√°c nh·∫≠n x√≥a kh√°ch h√†ng n√†y? Thao t√°c n√†y kh√¥ng th·ªÉ ho√†n t√°c!')">üóëÔ∏è X√≥a kh√°ch h√†ng</button>
        </form>
    </div>
</div>
</body>
</html>