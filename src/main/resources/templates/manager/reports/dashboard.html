<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/manager :: layout(content=~{::section})}">
<head>
    <title>B√°o c√°o</title>
</head>
<section>
    <div class="container">
        <h2 class="mb-4">üìä B√°o c√°o</h2>

        <form class="row g-2 mb-4" method="get">
            <div class="col-auto">
                <label class="form-label">NƒÉm</label>
                <input class="form-control" type="number" name="year" th:value="${year}">
            </div>
            <div class="col-auto">
                <label class="form-label">T·ª´ ng√†y</label>
                <input class="form-control" type="date" name="start"
                       th:value="${#temporals.format(rangeStart,'yyyy-MM-dd')}">
            </div>
            <div class="col-auto">
                <label class="form-label">ƒê·∫øn ng√†y</label>
                <input class="form-control" type="date" name="end"
                       th:value="${#temporals.format(rangeEnd,'yyyy-MM-dd')}">
            </div>
            <div class="col-auto align-self-end">
                <button class="btn btn-primary">L·ªçc</button>
            </div>
        </form>

        <div class="row g-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Doanh thu theo th√°ng [[${year}]]</div>
                    <div class="card-body p-0">
                        <table class="table table-striped mb-0">
                            <thead><tr><th>Th√°ng</th><th>Doanh thu</th></tr></thead>
                            <tbody>
                            <tr th:each="e : ${revByMonth}">
                                <td th:text="${e.key}"></td>
                                <td th:text="${#numbers.formatDecimal(e.value,0,'COMMA',0,'POINT')}"></td>
                            </tr>
                            <tr th:if="${#maps.isEmpty(revByMonth)}">
                                <td colspan="2" class="text-center text-muted">Ch∆∞a c√≥ d·ªØ li·ªáu</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">T·ªïng doanh thu (kho·∫£ng l·ªçc)</div>
                    <div class="card-body">
                        <h3 class="text-success"
                            th:text="${totalRevenue != null ? #numbers.formatDecimal(totalRevenue,0,'COMMA',0,'POINT') : '0'}"></h3>
                        <div class="text-muted">
                            [[${#temporals.format(rangeStart,'dd/MM/yyyy')}]] - [[${#temporals.format(rangeEnd,'dd/MM/yyyy')}]]
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-4 mt-1">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Doanh thu theo s√¢n</div>
                    <div class="card-body p-0">
                        <table class="table table-hover mb-0">
                            <thead><tr><th>S√¢n</th><th>Doanh thu</th></tr></thead>
                            <tbody>
                            <tr th:each="e : ${revenueByField}">
                                <td th:text="${e.key}"></td>
                                <td th:text="${#numbers.formatDecimal(e.value,0,'COMMA',0,'POINT')}"></td>
                            </tr>
                            <tr th:if="${#maps.isEmpty(revenueByField)}">
                                <td colspan="2" class="text-center text-muted">Ch∆∞a c√≥ d·ªØ li·ªáu</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Th·ªëng k√™ Booking</div>
                    <div class="card-body p-0">
                        <table class="table table-striped mb-0">
                            <thead><tr><th>Tr·∫°ng th√°i</th><th>S·ªë l∆∞·ª£ng</th></tr></thead>
                            <tbody>
                            <tr th:each="e : ${bookingStats}">
                                <td th:text="${e.key}"></td>
                                <td th:text="${e.value}"></td>
                            </tr>
                            <tr th:if="${#maps.isEmpty(bookingStats)}">
                                <td colspan="2" class="text-center text-muted">Ch∆∞a c√≥ d·ªØ li·ªáu</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</html>