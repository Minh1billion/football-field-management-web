<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/user :: layout(~{::content})}">
<body>
<div th:fragment="content" class="container mt-4">
    <h3>üîç Chi ti·∫øt ƒë·∫∑t s√¢n</h3>

    <div th:if="${booking}">
        <div class="card mb-3">
            <div class="card-body">
                <p><strong>M√£ ƒë·∫∑t:</strong> <span th:text="${booking.bookingCode}"></span></p>
                <p><strong>T√™n s√¢n:</strong> <span th:text="${booking.fieldName}"></span></p>
                <p><strong>Ng√†y ƒë·∫∑t:</strong> <span th:text="${#temporals.format(booking.bookingTime, 'dd/MM/yyyy')}"></span></p>
                <p><strong>Th·ªùi gian:</strong>
                    <span th:text="${#temporals.format(booking.startTime, 'HH:mm')}"></span> -
                    <span th:text="${#temporals.format(booking.endTime, 'HH:mm')}"></span>
                </p>
                <p><strong>T·ªïng ti·ªÅn:</strong>
                    <span th:text="${#numbers.formatDecimal(booking.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' VNƒê'"></span>
                </p>
                <p><strong>Tr·∫°ng th√°i:</strong> <span th:text="${booking.status}"></span></p>
                <p><strong>Thanh to√°n:</strong> <span th:text="${booking.paymentMethod}"></span></p>
            </div>
        </div>

        <!-- ƒê·ªì th·ªÉ thao ƒë√£ thu√™ -->
        <div class="card mb-3" th:if="${booking.sportWears != null and !booking.sportWears.isEmpty()}">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">üëï ƒê·ªì th·ªÉ thao ƒë√£ thu√™</h5>
            </div>
            <div class="card-body">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>S·ªë ng√†y thu√™</th>
                        <th>ƒê∆°n gi√°</th>
                        <th>Th√†nh ti·ªÅn</th>
                        <th>Tr·∫°ng th√°i</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="item : ${booking.sportWears}">
                        <td th:text="${item.name}"></td>
                        <td th:text="${item.quantity}"></td>
                        <td th:text="${item.rentalDays}"></td>
                        <td th:text="${#numbers.formatDecimal(item.rentalPricePerDay, 0, 'COMMA', 0, 'POINT')} + ' VNƒê'"></td>
                        <td th:text="${#numbers.formatDecimal(item.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' VNƒê'"></td>
                        <td>
                            <span class="badge bg-info" th:if="${item.status == 'RENTED'}" th:text="${item.status}"></span>
                            <span class="badge bg-success" th:if="${item.status == 'RETURNED'}" th:text="${item.status}"></span>
                            <span class="badge bg-warning" th:if="${item.status == 'DAMAGED'}" th:text="${item.status}"></span>
                            <span class="badge bg-danger" th:if="${item.status == 'LOST'}" th:text="${item.status}"></span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Th√¥ng b√°o n·∫øu ch∆∞a c√≥ ƒë·ªì thu√™ -->
        <div class="alert alert-info" th:if="${booking.sportWears == null or booking.sportWears.isEmpty()}">
            Ch∆∞a c√≥ ƒë·ªì th·ªÉ thao n√†o ƒë∆∞·ª£c thu√™ cho booking n√†y.
        </div>

        <!-- D·ªãch v·ª• ƒë√£ ƒë·∫∑t -->
        <div class="card mb-3" th:if="${booking.services != null and !booking.services.isEmpty()}">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">‚öôÔ∏è D·ªãch v·ª• ƒë√£ ƒë·∫∑t</h5>
            </div>
            <div class="card-body">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>T√™n d·ªãch v·ª•</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>ƒê∆°n gi√°</th>
                        <th>Th√†nh ti·ªÅn</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="item : ${booking.services}">
                        <td th:text="${item.name}"></td>
                        <td th:text="${item.quantity}"></td>
                        <td th:text="${#numbers.formatDecimal(item.rentalPricePerDay, 0, 'COMMA', 0, 'POINT')} + ' VNƒê'"></td>
                        <td th:text="${#numbers.formatDecimal(item.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' VNƒê'"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Th√¥ng b√°o n·∫øu ch∆∞a c√≥ d·ªãch v·ª• -->
        <div class="alert alert-info" th:if="${booking.services == null or booking.services.isEmpty()}">
            Ch∆∞a c√≥ d·ªãch v·ª• n√†o ƒë∆∞·ª£c ƒë·∫∑t cho booking n√†y.
        </div>
    </div>

    <a th:href="@{/user/bookings}" class="btn btn-secondary mt-3">‚¨Ö Quay l·∫°i danh s√°ch</a>
    <a th:href="@{/user/rentals}" class="btn btn-primary mt-3">‚ûï Th√™m ƒë·ªì thu√™</a>
</div>
</body>
</html>