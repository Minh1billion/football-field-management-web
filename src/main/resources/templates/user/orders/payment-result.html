<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/user :: layout(~{::content})}">
<head>
    <meta charset="UTF-8">
    <title>K·∫øt Qu·∫£ Thanh To√°n</title>
</head>
<body>
<div th:fragment="content">
    <div class="container mt-5 mb-5">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card shadow-lg border-0">
                    <div class="card-body text-center p-5">

                        <!-- Thanh to√°n th√†nh c√¥ng -->
                        <div th:if="${paymentSuccess}">
                            <div class="mb-4">
                                <i class="bi bi-check-circle-fill text-success" style="font-size: 5rem;"></i>
                            </div>

                            <h2 class="text-success mb-3">Thanh To√°n Th√†nh C√¥ng!</h2>
                            <p class="text-muted mb-4">
                                C·∫£m ∆°n b·∫°n ƒë√£ thanh to√°n. Giao d·ªãch c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω th√†nh c√¥ng.
                            </p>

                            <div class="alert alert-info">
                                <h5 class="mb-2">M√£ Giao D·ªãch</h5>
                                <h3 class="text-primary mb-0">
                                    #<span th:text="${orderId}">12345</span>
                                </h3>
                            </div>

                            <div class="alert alert-success">
                                <h5 class="mb-2">S·ªë Ti·ªÅn ƒê√£ Thanh To√°n</h5>
                                <h4 class="mb-0">
                                    <span th:text="${#numbers.formatDecimal(amount / 100, 0, 'COMMA', 0, 'POINT')}">100,000</span> ‚Ç´
                                </h4>
                            </div>

                            <div class="alert alert-light" th:if="${transactionNo}">
                                <small class="text-muted">
                                    M√£ giao d·ªãch VNPAY: <strong th:text="${transactionNo}"></strong>
                                </small>
                            </div>
                        </div>

                        <!-- Thanh to√°n th·∫•t b·∫°i -->
                        <div th:unless="${paymentSuccess}">
                            <div class="mb-4">
                                <i class="bi bi-x-circle-fill text-danger" style="font-size: 5rem;"></i>
                            </div>

                            <h2 class="text-danger mb-3">Thanh To√°n Th·∫•t B·∫°i!</h2>
                            <p class="text-muted mb-4">
                                R·∫•t ti·∫øc, giao d·ªãch c·ªßa b·∫°n kh√¥ng th·ªÉ ho√†n th√†nh.
                            </p>

                            <div class="alert alert-danger">
                                <h5 class="mb-2">M√£ L·ªói</h5>
                                <p class="mb-0">
                                    <span th:if="${errorCode == -1}">Ch·ªØ k√Ω kh√¥ng h·ª£p l·ªá</span>
                                    <span th:if="${errorCode == -2}">Thi·∫øu th√¥ng tin b·∫£o m·∫≠t</span>
                                    <span th:if="${errorCode == -3}">L·ªói h·ªá th·ªëng khi c·∫≠p nh·∫≠t</span>
                                    <span th:if="${errorCode == 0}">Giao d·ªãch kh√¥ng th√†nh c√¥ng</span>
                                </p>
                                <p th:if="${errorMessage}" class="text-muted small mt-2" th:text="${errorMessage}"></p>
                            </div>

                            <p class="text-muted">
                                Vui l√≤ng th·ª≠ l·∫°i ho·∫∑c li√™n h·ªá v·ªõi ch√∫ng t√¥i ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£.
                            </p>
                        </div>

                        <p class="mb-4">
                            <small class="text-muted">
                                Ch√∫ng t√¥i ƒë√£ g·ª≠i email x√°c nh·∫≠n ƒë·∫øn ƒë·ªãa ch·ªâ email c·ªßa b·∫°n.<br>
                                Vui l√≤ng ki·ªÉm tra email ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt.
                            </small>
                        </p>

                        <hr class="my-4">

                        <div class="d-grid gap-2">
                            <a th:href="@{/user/orders}"
                               class="btn btn-primary btn-lg">
                                <i class="bi bi-list-ul"></i> Xem Danh S√°ch Thanh To√°n
                            </a>

                            <a th:if="${!paymentSuccess}"
                               th:href="@{/user/orders}"
                               class="btn btn-warning">
                                <i class="bi bi-arrow-clockwise"></i> Th·ª≠ L·∫°i
                            </a>

                            <a th:href="@{/user/rentals}"
                               class="btn btn-outline-primary">
                                <i class="bi bi-arrow-left"></i> V·ªÅ Trang Ch·ªß
                            </a>
                        </div>

                        <div class="mt-4 p-3 bg-light rounded">
                            <h6 class="mb-2">üìû C·∫ßn H·ªó Tr·ª£?</h6>
                            <p class="mb-0">
                                <small>
								    Li√™n h·ªá: <strong th:text="${infoConfig.phone}"></strong> ho·∫∑c
								    <a th:href="'mailto:' + ${infoConfig.mail}" th:text="${infoConfig.mail}"></a>
								</small>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>