<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/admin :: layout(~{::content})}">
<body>
<div th:fragment="content">
    <h2 class="mb-3">üëï Qu·∫£n l√Ω trang ph·ª•c th·ªÉ thao</h2>

    <a th:href="@{/admin/sportwears/create}" class="btn btn-primary mb-3">‚ûï Th√™m trang ph·ª•c</a>

    <!-- Form t√¨m ki·∫øm -->
    <div class="card mb-3">
        <div class="card-body">
            <form th:action="@{/admin/sportwears}" method="get" class="row g-3">
                <div class="col-md-3">
                    <label for="name" class="form-label">T√¨m theo t√™n:</label>
                    <input type="text" class="form-control" id="name" name="name"
                           th:value="${searchName}" placeholder="Nh·∫≠p t√™n trang ph·ª•c...">
                </div>
                <div class="col-md-3">
                    <label for="wearType" class="form-label">Lo·∫°i trang ph·ª•c:</label>
                    <select class="form-select" id="wearType" name="wearType">
                        <option value="">-- T·∫•t c·∫£ lo·∫°i --</option>
                        <option th:each="typeOption : ${wearTypes}"
                                th:value="${typeOption}"
                                th:text="${typeOption}"
                                th:selected="${typeOption.toString() == searchWearType}">
                        </option>
                    </select>
                </div>
                <div class="col-md-2">
                    <label for="sizeFilter" class="form-label">K√≠ch th∆∞·ªõc:</label>
                    <select class="form-select" id="sizeFilter" name="sizeFilter">
                        <option value="">-- T·∫•t c·∫£ size --</option>
                        <option th:each="sizeOption : ${sizes}"
                                th:value="${sizeOption}"
                                th:text="${sizeOption}"
                                th:selected="${sizeOption.toString() == searchSize}">
                        </option>
                    </select>
                </div>
                <div class="col-md-4 d-flex align-items-end">
                    <button type="submit" class="btn btn-outline-primary me-2">üîç T√¨m ki·∫øm</button>
                    <a th:href="@{/admin/sportwears}" class="btn btn-outline-secondary">üîÑ Reset</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Th√¥ng b√°o -->
    <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
        <span th:text="${successMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <span th:text="${errorMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <!-- B·∫£ng trang ph·ª•c -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">üìã Danh s√°ch trang ph·ª•c th·ªÉ thao</h5>
        </div>
        <div class="card-body">
            <div th:if="${sportWears.content.empty}" class="text-center py-4">
                <h5>Kh√¥ng c√≥ trang ph·ª•c n√†o</h5>
                <p class="text-muted">H√£y th√™m trang ph·ª•c ƒë·∫ßu ti√™n!</p>
            </div>
            
            <div th:unless="${sportWears.content.empty}">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>H√¨nh ·∫£nh</th>
                            <th>T√™n</th>
                            <th>Lo·∫°i</th>
                            <th>Size</th>
                            <th>M√†u</th>
                            <th>Gi√° thu√™/ng√†y</th>
                            <th>Gi√° b√°n</th>
                            <th>T·ªìn kho</th>
                            <th>Cho thu√™</th>
                            <th>B√°n h√†ng</th>
                            <th>Thao t√°c</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="sportWear : ${sportWears.content}">
                            <td th:text="${sportWear.id}"></td>
                            <td>
                                <img th:if="${sportWear.imageUrl}" th:src="${sportWear.imageUrl}" 
                                     alt="H√¨nh ·∫£nh" class="img-thumbnail" style="width: 50px; height: 50px; object-fit: cover;">
                                <span th:unless="${sportWear.imageUrl}" class="text-muted">Kh√¥ng c√≥ ·∫£nh</span>
                            </td>
                            <td th:text="${sportWear.name}"></td>
                            <td th:text="${sportWear.wearType}"></td>
                            <td th:text="${sportWear.size}"></td>
                            <td th:text="${sportWear.color}"></td>
                            <td th:text="${sportWear.rentalPricePerDay + ' VNƒê'}"></td>
                            <td th:text="${sportWear.sellPrice + ' VNƒê'}"></td>
                            <td th:text="${sportWear.stockQuantity}"></td>
                            <td>
                                <form th:action="@{/admin/sportwears/toggle-rent-availability/{id}(id=${sportWear.id})}" 
                                      method="post" style="display: inline;">
                                    <button type="submit" class="btn btn-sm" 
                                            th:classappend="${sportWear.isAvailableForRent} ? 'btn-success' : 'btn-secondary'">
                                        <span th:text="${sportWear.isAvailableForRent} ? '‚úÖ' : '‚ùå'"></span>
                                    </button>
                                </form>
                            </td>
                            <td>
                                <form th:action="@{/admin/sportwears/toggle-sale-availability/{id}(id=${sportWear.id})}" 
                                      method="post" style="display: inline;">
                                    <button type="submit" class="btn btn-sm" 
                                            th:classappend="${sportWear.isAvailableForSale} ? 'btn-success' : 'btn-secondary'">
                                        <span th:text="${sportWear.isAvailableForSale} ? '‚úÖ' : '‚ùå'"></span>
                                    </button>
                                </form>
                            </td>
                            <td>
                                <a th:href="@{/admin/sportwears/edit/{id}(id=${sportWear.id})}" 
                                   class="btn btn-sm btn-warning me-1">‚úèÔ∏è S·ª≠a</a>
                                <form th:action="@{/admin/sportwears/delete/{id}(id=${sportWear.id})}" 
                                      method="post" style="display: inline;"
                                      onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a trang ph·ª•c n√†y?')">
                                    <button type="submit" class="btn btn-sm btn-danger">üóëÔ∏è X√≥a</button>
                                </form>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Ph√¢n trang -->
                <nav th:if="${sportWears.totalPages > 1}">
                    <ul class="pagination justify-content-center">
                        <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                            <a class="page-link" th:href="@{/admin/sportwears(page=${currentPage - 1}, name=${searchName}, wearType=${searchWearType}, sizeFilter=${searchSize})}">Tr∆∞·ªõc</a>
                        </li>
                        <li th:each="pageNum : ${#numbers.sequence(0, sportWears.totalPages - 1)}" 
                            class="page-item" th:classappend="${pageNum == currentPage} ? 'active'">
                            <a class="page-link" th:href="@{/admin/sportwears(page=${pageNum}, name=${searchName}, wearType=${searchWearType}, sizeFilter=${searchSize})}" th:text="${pageNum + 1}"></a>
                        </li>
                        <li class="page-item" th:classappend="${currentPage >= sportWears.totalPages - 1} ? 'disabled'">
                            <a class="page-link" th:href="@{/admin/sportwears(page=${currentPage + 1}, name=${searchName}, wearType=${searchWearType}, sizeFilter=${searchSize})}">Sau</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
</body>
</html>