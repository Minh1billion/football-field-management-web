<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/admin :: layout(~{::content})}">
<body>
<div th:fragment="content">
    <h2 class="mb-3">üëÅÔ∏è Chi ti·∫øt d·ªãch v·ª•</h2>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Th√¥ng tin chi ti·∫øt</h5>
                    <div>
                        <a th:href="@{/admin/services/edit/{id}(id=${service.id})}" class="btn btn-warning btn-sm">‚úèÔ∏è Ch·ªânh s·ª≠a</a>
                        <a th:href="@{/admin/services}" class="btn btn-secondary btn-sm">üîô Quay l·∫°i</a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>ID:</strong></td>
                                    <td th:text="${service.id}"></td>
                                </tr>
                                <tr>
                                    <td><strong>T√™n d·ªãch v·ª•:</strong></td>
                                    <td th:text="${service.name}"></td>
                                </tr>
                                <tr>
                                    <td><strong>Lo·∫°i d·ªãch v·ª•:</strong></td>
                                    <td>
                                        <span class="badge bg-info" th:text="${service.serviceType}"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><strong>Gi√°:</strong></td>
                                    <td>
                                        <span class="text-success fw-bold" 
                                              th:text="${service.price} + ' VNƒê'"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><strong>S·ªë l∆∞·ª£ng t·ªìn kho:</strong></td>
                                    <td>
                                        <span th:text="${service.stockQuantity}" 
                                              th:classappend="${service.stockQuantity > 0 ? 'text-success' : 'text-warning'}"></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><strong>Tr·∫°ng th√°i:</strong></td>
                                    <td>
                                        <span th:if="${service.isAvailable}" class="badge bg-success">Ho·∫°t ƒë·ªông</span>
                                        <span th:unless="${service.isAvailable}" class="badge bg-danger">T·∫°m d·ª´ng</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><strong>Ng√†y t·∫°o:</strong></td>
                                    <td th:text="${#temporals.format(service.createdAt, 'dd/MM/yyyy HH:mm:ss')}"></td>
                                </tr>
                                <tr th:if="${service.updatedAt != null}">
                                    <td><strong>C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:</strong></td>
                                    <td th:text="${#temporals.format(service.updatedAt, 'dd/MM/yyyy HH:mm:ss')}"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <!-- H√¨nh ·∫£nh d·ªãch v·ª• -->
                            <div th:if="${service.imageUrl != null and service.imageUrl != ''}">
                                <h6>H√¨nh ·∫£nh d·ªãch v·ª•:</h6>
                                <img th:src="${service.imageUrl}" alt="Service Image" 
                                     class="img-fluid rounded border" 
                                     style="max-width: 100%; max-height: 300px; object-fit: cover;">
                            </div>
                            <div th:unless="${service.imageUrl != null and service.imageUrl != ''}" 
                                 class="text-center text-muted">
                                <div class="border rounded p-4" style="height: 200px; display: flex; align-items: center; justify-content: center;">
                                    <span>üì∑ Ch∆∞a c√≥ h√¨nh ·∫£nh</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- M√¥ t·∫£ -->
                    <div class="row mt-3" th:if="${service.description != null and service.description != ''}">
                        <div class="col-12">
                            <h6>M√¥ t·∫£:</h6>
                            <div class="card bg-light">
                                <div class="card-body">
                                    <p class="mb-0" th:text="${service.description}"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Th·ªëng k√™ s·ª≠ d·ª•ng -->
                    <div class="row mt-3">
                        <div class="col-12">
                            <h6>Th·ªëng k√™:</h6>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card bg-primary text-white">
                                        <div class="card-body text-center">
                                            <h5 th:text="${bookingCount != null ? bookingCount : 0}">0</h5>
                                            <small>L∆∞·ª£t ƒë·∫∑t</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-success text-white">
                                        <div class="card-body text-center">
                                            <h5 th:text="${orderCount != null ? orderCount : 0}">0</h5>
                                            <small>ƒê∆°n h√†ng</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-info text-white">
                                        <div class="card-body text-center">
                                            <h5 th:text="${service.stockQuantity > 0 ? 'C√≤n h√†ng' : 'H·∫øt h√†ng'}">-</h5>
                                            <small>T√¨nh tr·∫°ng kho</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- N√∫t h√†nh ƒë·ªông -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="d-flex justify-content-center gap-2">
                                <form th:action="@{/admin/services/toggle-availability/{id}(id=${service.id})}" 
                                      method="post" style="display: inline;">
                                    <button type="submit" class="btn btn-outline-primary">
                                        <span th:if="${service.isAvailable}">‚è∏Ô∏è T·∫°m d·ª´ng d·ªãch v·ª•</span>
                                        <span th:unless="${service.isAvailable}">‚ñ∂Ô∏è K√≠ch ho·∫°t d·ªãch v·ª•</span>
                                    </button>
                                </form>
                                <form th:action="@{/admin/services/delete/{id}(id=${service.id})}" 
                                      method="post" style="display: inline;"
                                      onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a d·ªãch v·ª• n√†y?')">
                                    <button type="submit" class="btn btn-outline-danger">üóëÔ∏è X√≥a d·ªãch v·ª•</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>